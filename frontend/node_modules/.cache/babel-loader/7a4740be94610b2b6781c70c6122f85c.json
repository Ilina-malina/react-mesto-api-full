{"ast":null,"code":"import _slicedToArray from\"/Users/ilina/Projects/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{api}from'../utils/Api.js';import Card from'./Card.js';import{CurrentUserContext}from'../contexts/CurrentUserContext.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Main(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cards=_useState2[0],setCards=_useState2[1];var currentUser=React.useContext(CurrentUserContext);useEffect(function(){api.getInitialCards().then(function(cards){setCards(cards);});},[]);var handleLike=function handleLike(card){if(card.likes.some(function(item){return item._id===currentUser.id;})){api.deleteLike(card._id).then(function(newCard){setCards(function(cards){return cards.map(function(item){return card._id===item._id?newCard:item;});});});}else{api.putLike(card._id).then(function(newCard){setCards(function(cards){return cards.map(function(item){return card._id===item._id?newCard:item;});});});}};return/*#__PURE__*/_jsxs(\"main\",{className:\"main\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"profile\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile__image\",style:{backgroundImage:\"url(\".concat(currentUser.avatar,\")\")},children:/*#__PURE__*/_jsx(\"div\",{className:\"profile__overlay\",children:/*#__PURE__*/_jsx(\"div\",{className:\"profile__overlay-image\",onClick:props.onEditAvatar})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile__info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile__container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"profile__name\",children:currentUser.name}),/*#__PURE__*/_jsx(\"button\",{className:\"profile__edit-button\",type:\"button\",\"aria-label\":\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",onClick:props.onEditProfile})]}),/*#__PURE__*/_jsx(\"p\",{className:\"profile__subscribe\",children:currentUser.about})]}),/*#__PURE__*/_jsx(\"button\",{className:\"profile__add-button\",type:\"button\",\"aria-label\":\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044E\",onClick:props.onAddPlace})]}),/*#__PURE__*/_jsx(\"section\",{className:\"elements\",children:cards.map(function(card){return/*#__PURE__*/_jsx(Card,{card:card,onCardClick:props.onCardClick,onLikeClick:handleLike},card._id);})})]});}export default Main;","map":{"version":3,"names":["React","useState","useEffect","api","Card","CurrentUserContext","Main","props","cards","setCards","currentUser","useContext","getInitialCards","then","handleLike","card","likes","some","item","_id","id","deleteLike","newCard","map","putLike","backgroundImage","avatar","onEditAvatar","name","onEditProfile","about","onAddPlace","onCardClick"],"sources":["/Users/ilina/Projects/mesto-react/src/components/Main.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { api } from '../utils/Api.js';\nimport Card from './Card.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\n\nfunction Main(props) {\n    const [cards, setCards] = useState([]);\n\n    const currentUser = React.useContext(CurrentUserContext);\n\n    useEffect(() => {\n        api.getInitialCards().then(cards => {\n            setCards(cards);\n        })\n    }, [])\n\n    const handleLike = (card) => {\n  \n      if (card.likes.some(item => item._id === currentUser.id)) {\n        api.deleteLike(card._id).then((newCard) => {\n          setCards((cards) => cards.map((item) => card._id === item._id ? newCard : item));\n        })\n      } else {\n       api.putLike(card._id).then((newCard) => {\n        setCards((cards) => cards.map((item) => card._id === item._id ? newCard : item));\n       })\n      }\n  };\n\n    return (\n        <main className=\"main\">\n            <section className=\"profile\">        \n              <div className=\"profile__image\" style={{ backgroundImage: `url(${currentUser.avatar})` }} >\n                <div className=\"profile__overlay\">\n                  <div className=\"profile__overlay-image\" onClick={props.onEditAvatar}>\n                  </div>\n                </div>\n              </div>\n              <div className=\"profile__info\">\n                <div className=\"profile__container\">\n                  <h1 className=\"profile__name\">{currentUser.name}</h1>\n                  <button className=\"profile__edit-button\" type=\"button\" aria-label=\"Редактировать профиль\" onClick={props.onEditProfile}></button>\n                </div>\n                <p className=\"profile__subscribe\">{currentUser.about}</p>\n              </div>\n              <button className=\"profile__add-button\" type=\"button\" aria-label=\"Добавить информацию\" onClick={props.onAddPlace}></button>\n            </section>\n            <section className=\"elements\">\n                {cards.map((card) => <Card key={card._id} card={card} onCardClick={props.onCardClick} onLikeClick={handleLike} />)}\n            </section>\n        </main>\n    )\n}\n\nexport default Main;"],"mappings":"uHAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,GAAG,KAAQ,iBAAiB,CACrC,MAAOC,KAAI,KAAM,WAAW,CAC5B,OAASC,kBAAkB,KAAQ,mCAAmC,CAAC,wFAEvE,QAASC,KAAI,CAACC,KAAK,CAAE,CACjB,cAA0BN,QAAQ,CAAC,EAAE,CAAC,wCAA/BO,KAAK,eAAEC,QAAQ,eAEtB,GAAMC,YAAW,CAAGV,KAAK,CAACW,UAAU,CAACN,kBAAkB,CAAC,CAExDH,SAAS,CAAC,UAAM,CACZC,GAAG,CAACS,eAAe,EAAE,CAACC,IAAI,CAAC,SAAAL,KAAK,CAAI,CAChCC,QAAQ,CAACD,KAAK,CAAC,CACnB,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMM,WAAU,CAAG,QAAbA,WAAU,CAAIC,IAAI,CAAK,CAE3B,GAAIA,IAAI,CAACC,KAAK,CAACC,IAAI,CAAC,SAAAC,IAAI,QAAIA,KAAI,CAACC,GAAG,GAAKT,WAAW,CAACU,EAAE,GAAC,CAAE,CACxDjB,GAAG,CAACkB,UAAU,CAACN,IAAI,CAACI,GAAG,CAAC,CAACN,IAAI,CAAC,SAACS,OAAO,CAAK,CACzCb,QAAQ,CAAC,SAACD,KAAK,QAAKA,MAAK,CAACe,GAAG,CAAC,SAACL,IAAI,QAAKH,KAAI,CAACI,GAAG,GAAKD,IAAI,CAACC,GAAG,CAAGG,OAAO,CAAGJ,IAAI,GAAC,GAAC,CAClF,CAAC,CAAC,CACJ,CAAC,IAAM,CACNf,GAAG,CAACqB,OAAO,CAACT,IAAI,CAACI,GAAG,CAAC,CAACN,IAAI,CAAC,SAACS,OAAO,CAAK,CACvCb,QAAQ,CAAC,SAACD,KAAK,QAAKA,MAAK,CAACe,GAAG,CAAC,SAACL,IAAI,QAAKH,KAAI,CAACI,GAAG,GAAKD,IAAI,CAACC,GAAG,CAAGG,OAAO,CAAGJ,IAAI,GAAC,GAAC,CACjF,CAAC,CAAC,CACH,CACJ,CAAC,CAEC,mBACI,cAAM,SAAS,CAAC,MAAM,wBAClB,iBAAS,SAAS,CAAC,SAAS,wBAC1B,YAAK,SAAS,CAAC,gBAAgB,CAAC,KAAK,CAAE,CAAEO,eAAe,eAASf,WAAW,CAACgB,MAAM,KAAI,CAAE,uBACvF,YAAK,SAAS,CAAC,kBAAkB,uBAC/B,YAAK,SAAS,CAAC,wBAAwB,CAAC,OAAO,CAAEnB,KAAK,CAACoB,YAAa,EAC9D,EACF,EACF,cACN,aAAK,SAAS,CAAC,eAAe,wBAC5B,aAAK,SAAS,CAAC,oBAAoB,wBACjC,WAAI,SAAS,CAAC,eAAe,UAAEjB,WAAW,CAACkB,IAAI,EAAM,cACrD,eAAQ,SAAS,CAAC,sBAAsB,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAW,2HAAuB,CAAC,OAAO,CAAErB,KAAK,CAACsB,aAAc,EAAU,GAC7H,cACN,UAAG,SAAS,CAAC,oBAAoB,UAAEnB,WAAW,CAACoB,KAAK,EAAK,GACrD,cACN,eAAQ,SAAS,CAAC,qBAAqB,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAW,+GAAqB,CAAC,OAAO,CAAEvB,KAAK,CAACwB,UAAW,EAAU,GACnH,cACV,gBAAS,SAAS,CAAC,UAAU,UACxBvB,KAAK,CAACe,GAAG,CAAC,SAACR,IAAI,qBAAK,KAAC,IAAI,EAAgB,IAAI,CAAEA,IAAK,CAAC,WAAW,CAAER,KAAK,CAACyB,WAAY,CAAC,WAAW,CAAElB,UAAW,EAA9EC,IAAI,CAACI,GAAG,CAAyE,GAAC,EAC5G,GACP,CAEf,CAEA,cAAeb,KAAI"},"metadata":{},"sourceType":"module"}