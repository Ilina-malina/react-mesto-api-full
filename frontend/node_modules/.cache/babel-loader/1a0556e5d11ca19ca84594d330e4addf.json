{"ast":null,"code":"import _toConsumableArray from\"/Users/ilina/Projects/mesto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/ilina/Projects/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import'../index.css';import{CurrentUserContext}from'../contexts/CurrentUserContext.js';import{CardsContext}from'../contexts/CardsContext.js';import Header from'./Header.js';import Main from'./Main';import Footer from'./Footer.js';import PopupWithForm from'./PopupWithForm.js';import ImagePopup from'./ImagePopup.js';import EditProfilePopup from'./EditProfilePopup.js';import EditAvatarPopup from'./EditAvatarPopup.js';import AddPlacePopup from'./AddPlacePopup.js';import{api}from'../utils/Api.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEditProfilePopupOpen=_useState2[0],setIsEditProfilePopupOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAddPlacePopupOpen=_useState4[0],setIsAddPlacePopupOpen=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEditAvatarPopupOpen=_useState6[0],setIsEditAvatarPopupOpen=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),selectedCard=_useState8[0],setSelectedCard=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),currentUser=_useState10[0],setCurrentUser=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),cards=_useState12[0],setCards=_useState12[1];useEffect(function(){api.getUserInfo().then(function(data){setCurrentUser(data);});},[]);useEffect(function(){api.getInitialCards().then(function(cardList){setCards(cardList);});},[]);var handleLike=function handleLike(card){if(card.likes.some(function(item){return item._id===currentUser._id;})){api.deleteLike(card._id).then(function(newCard){setCards(function(cards){return cards.map(function(item){return card._id===item._id?newCard:item;});});});}else{api.putLike(card._id).then(function(newCard){setCards(function(cards){return cards.map(function(item){return card._id===item._id?newCard:item;});});});}};var handleCardDelete=function handleCardDelete(card){api.deleteCard(card._id).then(function(){setCards(function(cards){return cards.filter(function(item){return item._id!==card._id;});});});};function handleUpdateUser(name,about){api.editUserInfo(name,about).then(function(data){setCurrentUser(data);closeAllPopups();});}function handleUpdateAvatar(avatar){api.editUserAvatar(avatar).then(function(data){setCurrentUser(data);closeAllPopups();});}function handleAddPlaceSubmit(name,link){api.addCard({name:name,link:link}).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();});}function handleEditAvatarClick(){setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);}function handleEditProfileClick(){setIsEditProfilePopupOpen(!isEditProfilePopupOpen);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(!isAddPlacePopupOpen);}function closeAllPopups(){setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setIsEditAvatarPopupOpen(false);setSelectedCard(null);}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsx(CardsContext.Provider,{value:cards,children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onCardClick:setSelectedCard,onCardLike:handleLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(PopupWithForm,{name:\"delete-confirmation\",title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",onClose:closeAllPopups,children:/*#__PURE__*/_jsx(\"button\",{className:\"popup__submit-button\",type:\"submit\",\"aria-label\":\"\\u0414\\u0430\",children:\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u044C\"})}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups})]})})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","CurrentUserContext","CardsContext","Header","Main","Footer","PopupWithForm","ImagePopup","EditProfilePopup","EditAvatarPopup","AddPlacePopup","api","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","getUserInfo","then","data","getInitialCards","cardList","handleLike","card","likes","some","item","_id","deleteLike","newCard","map","putLike","handleCardDelete","deleteCard","filter","handleUpdateUser","name","about","editUserInfo","closeAllPopups","handleUpdateAvatar","avatar","editUserAvatar","handleAddPlaceSubmit","link","addCard","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick"],"sources":["/Users/ilina/Projects/mesto-react/src/components/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport'../index.css';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport { CardsContext } from '../contexts/CardsContext.js';\nimport Header from './Header.js';\nimport Main from './Main';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport ImagePopup from './ImagePopup.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport { api } from '../utils/Api.js';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n\n  useEffect(() => {\n    api.getUserInfo().then(data => {\n        setCurrentUser(data);\n    });\n}, [])\n\n  useEffect(() => {\n    api.getInitialCards().then(cardList => {\n        setCards(cardList);\n    })\n  }, [])\n\n  const handleLike = (card) => {\n    if (card.likes.some(item => item._id === currentUser._id)) {\n      api.deleteLike(card._id).then((newCard) => {\n        setCards((cards) => cards.map((item) => card._id === item._id ? newCard : item));\n      })\n    } else {\n     api.putLike(card._id).then((newCard) => {\n      setCards((cards) => cards.map((item) => card._id === item._id ? newCard : item));\n     })\n    }\n  };\n\n  const handleCardDelete = (card) => {\n      api.deleteCard(card._id).then(() => {\n        setCards((cards) => cards.filter(item => item._id !== card._id))\n      })\n  };\n\nfunction handleUpdateUser(name, about) {\n  api.editUserInfo(name, about).then(data => {\n    setCurrentUser(data);\n    closeAllPopups();\n  })\n}\n\nfunction handleUpdateAvatar(avatar) {\n  api.editUserAvatar(avatar).then(data => {\n    setCurrentUser(data);\n    closeAllPopups();\n  })\n}\n\nfunction handleAddPlaceSubmit(name, link) {\n  api.addCard({\n    name: name,\n    link: link\n  }).then(newCard => {\n    setCards([newCard, ...cards]);\n    closeAllPopups();\n  })\n}\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setSelectedCard(null);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <CardsContext.Provider value={cards}>\n      <div className=\"App\">\n        <Header />\n        <Main \n          onAddPlace={handleAddPlaceClick} \n          onEditAvatar={handleEditAvatarClick} \n          onEditProfile={handleEditProfileClick} \n          onCardClick={setSelectedCard}\n          onCardLike={handleLike}\n          onCardDelete={handleCardDelete}\n        />\n        <Footer />\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n        <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\n        <PopupWithForm name=\"delete-confirmation\" title=\"Вы уверены?\" onClose={closeAllPopups}>\n          <button className=\"popup__submit-button\" type=\"submit\" aria-label=\"Да\">Подтвердить</button>\n        </PopupWithForm>\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n        <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n      </div>\n      </CardsContext.Provider>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module"}