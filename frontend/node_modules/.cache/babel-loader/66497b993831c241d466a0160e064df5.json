{"ast":null,"code":"class Api {\n  constructor(_ref) {\n    let {\n      baseUrl\n    } = _ref;\n    this.addCard = card => {\n      return fetch(this._baseUrl + \"/cards\", {\n        method: \"POST\",\n        headers: this._getHeaders(),\n        body: JSON.stringify(card)\n      }).then(this._checkStatus);\n    };\n    this._getHeaders = () => {\n      const token = localStorage.getItem(\"jwt\");\n      return {\n        \"Authorization\": `Bearer ${token}`,\n        \"Content-Type\": \"application/json\"\n      };\n    };\n    this._baseUrl = baseUrl;\n  }\n  getInitialCards() {\n    return fetch(this._baseUrl + \"/cards\", {\n      headers: this._getHeaders()\n    }).then(this._checkStatus);\n  }\n  deleteCard(cardId) {\n    return fetch(this._baseUrl + \"/cards/\" + cardId, {\n      method: \"DELETE\",\n      headers: this._getHeaders()\n    }).then(this._checkStatus);\n  }\n  getUserInfo() {\n    return fetch(this._baseUrl + \"/users/me\", {\n      headers: this._getHeaders()\n    }).then(this._checkStatus);\n  }\n  editUserInfo(name, about) {\n    return fetch(this._baseUrl + \"/users/me\", {\n      method: \"PATCH\",\n      headers: this._getHeaders(),\n      body: JSON.stringify({\n        name,\n        about\n      })\n    }).then(this._checkStatus);\n  }\n  editUserAvatar(avatar) {\n    return fetch(this._baseUrl + \"/users/me/avatar\", {\n      method: \"PATCH\",\n      headers: this._getHeaders(),\n      body: JSON.stringify({\n        avatar\n      })\n    }).then(this._checkStatus);\n  }\n  putLike(cardId) {\n    return fetch(this._baseUrl + \"/cards/\" + cardId + \"/likes\", {\n      method: \"PUT\",\n      headers: this._getHeaders()\n    }).then(this._checkStatus);\n  }\n  deleteLike(cardId) {\n    return fetch(this._baseUrl + \"/cards/\" + cardId + \"/likes\", {\n      method: \"DELETE\",\n      headers: this._getHeaders()\n    }).then(this._checkStatus);\n  }\n  _checkStatus(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n}\nexport const api = new Api({\n  baseUrl: \"http://moe-mesto.nomoredomains.club\"\n});","map":{"version":3,"names":["Api","constructor","baseUrl","addCard","card","fetch","_baseUrl","method","headers","_getHeaders","body","JSON","stringify","then","_checkStatus","token","localStorage","getItem","getInitialCards","deleteCard","cardId","getUserInfo","editUserInfo","name","about","editUserAvatar","avatar","putLike","deleteLike","res","ok","json","Promise","reject","status","api"],"sources":["/Users/ilina/Projects/react-mesto-auth/src/utils/Api.js"],"sourcesContent":["class Api {\n  constructor({ baseUrl }) {\n    this._baseUrl = baseUrl;\n  }\n\n  getInitialCards() {\n    return fetch(this._baseUrl + \"/cards\", {\n      headers: this._getHeaders(),\n    }).then(this._checkStatus);\n  }\n\n  addCard = (card) => {\n    return fetch(this._baseUrl + \"/cards\", {\n      method: \"POST\",\n      headers: this._getHeaders(),\n      body: JSON.stringify(card),\n    }).then(this._checkStatus);\n  };\n\n  deleteCard(cardId) {\n    return fetch(this._baseUrl + \"/cards/\" + cardId, {\n      method: \"DELETE\",\n      headers: this._getHeaders(),\n    }).then(this._checkStatus);\n  }\n\n  getUserInfo() {\n    return fetch(this._baseUrl + \"/users/me\", {\n      headers: this._getHeaders(),\n    }).then(this._checkStatus);\n  }\n\n  editUserInfo(name, about) {\n    return fetch(this._baseUrl + \"/users/me\", {\n      method: \"PATCH\",\n      headers: this._getHeaders(),\n      body: JSON.stringify({ name, about }),\n    }).then(this._checkStatus);\n  }\n\n  editUserAvatar(avatar) {\n    return fetch(this._baseUrl + \"/users/me/avatar\", {\n      method: \"PATCH\",\n      headers: this._getHeaders(),\n      body: JSON.stringify({ avatar }),\n    }).then(this._checkStatus);\n  }\n\n  putLike(cardId) {\n    return fetch(this._baseUrl + \"/cards/\" + cardId + \"/likes\", {\n      method: \"PUT\",\n      headers: this._getHeaders(),\n    }).then(this._checkStatus);\n  }\n\n  deleteLike(cardId) {\n    return fetch(this._baseUrl + \"/cards/\" + cardId + \"/likes\", {\n      method: \"DELETE\",\n      headers: this._getHeaders(),\n    }).then(this._checkStatus);\n  }\n\n  _checkStatus(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  _getHeaders = () => {\n    const token = localStorage.getItem(\"jwt\");\n    return {\n      \"Authorization\": `Bearer ${token}`,\n      \"Content-Type\": \"application/json\",\n    }\n  }\n}\n\nexport const api = new Api({\n  baseUrl: \"http://moe-mesto.nomoredomains.club\",\n});\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}